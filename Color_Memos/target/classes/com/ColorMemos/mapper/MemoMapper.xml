<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ColorMemos.mapper.MemoMapper">

	<!-- 메모 생성 -->
	<insert id="memoRegister">
		INSERT INTO MEMO 
		VALUES(	MEMO_SEQ.NEXTVAL
				,#{mname}
				,#{mdescription}
				,sysdate
				,#{regid} 
				,#{mcolor}
				,0
				,0
				,0
				)
	</insert>
	
	<!-- 메모 리스트 -->
	<select id="memoList" resultType="com.ColorMemos.domain.MemoDTO">
		SELECT
			MNO 	
			,MNAME
			,MDESCRIPTION
			,TO_CHAR(REGDAY,'YY/MM/DD')REGDAY
			,REGID
			,MCOLOR
			,HIDE_GB
            ,FAVORITE_GB
            ,DELETE_GB
		FROM MEMO
		WHERE REGID = #{email} AND DELETE_GB = 0
		ORDER BY MNO DESC
	</select>
	
	<!-- 삭제된 메모 리스트 -->
	<select id="delt_memoList" resultType="com.ColorMemos.domain.MemoDTO">
		SELECT
			MNO 	
			,MNAME
			,MDESCRIPTION
			,TO_CHAR(REGDAY,'YY/MM/DD')REGDAY
			,REGID
			,MCOLOR
			,HIDE_GB
            ,FAVORITE_GB
            ,DELETE_GB
		FROM MEMO
		WHERE REGID = #{email} AND DELETE_GB = 1
		ORDER BY MNO DESC
	</select>
	
	<!-- 메모 삭제 -->
	<delete id="memoDelete">
		UPDATE MEMO SET DELETE_GB = 1
		WHERE MNO = #{mno}
	</delete>
	
</mapper>